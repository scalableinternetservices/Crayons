<div class="page-header">
<h1>Gallery</h1>
</div>


<body style= "padding-top: 50px">

<div class="media">


  <% @photos.each do |photo| %>
    <h4 class="media-heading"><%= photo.title %></h4>
    <div class="media-left">
      <!-- Renders image -->
      <%= link_to image_tag(photo.image.url, class: 'media-object'), photo.image.url, target: '_blank' %>
      <!-- Renders Annotation-->
      <!-- rendering stuff here photo.annotation.url, class: 'text-field?'-->
      <!-- Button to delete image -->
      <p style= "padding-top: 2px"></p>
      <%= link_to 'Remove', photo_path(photo), class: 'btn btn-danger', method: :delete, data: {confirm: 'Are you sure?'} %>

      <!-- So this section is creating a new empty annotation for each photo and if the user decides to -->

      <% @new_ann = Annotation.create(params[:photo_id]) %>
         <!-- #does this recreate a single ann for the photoid? Since photoid is the only param being passed, won't find_or_create_by just find the old ann created for that id and replace it? -->
      <div class="form-group">
      <%= form_for @new_ann do |f| %>
          <!-- # this isn't saving the label to the table ann entry -->
        <%= f.text_field :label %>
        <%= f.submit 'Tag this photo!', class: 'btn btn-default' %>
        <% @thiselem = " " %>
        <% photo.annotations << @new_ann %>
      <% end %>
      </div>

      <p style= "padding-top: 5px"></p>
    </div>

    <div class="media-body">
      <% photo.annotations.each do |a| %>
        <% if a.label != nil %>
          <% @thiselem << " " << a.label.to_s %>
          <%= @thiselem %>
        <% end %>
      <% end %>


    </div>

  <% end %>
</div>
</body>
